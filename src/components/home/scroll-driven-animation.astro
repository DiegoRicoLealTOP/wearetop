---
import { Icon } from "astro-icon/components";
---

<div class="timeline bg-black text-white">
  <div class="outro container">
    <section class="content-fluid">
      <Icon name="directional" class="text-cteal-100 mx-auto size-14" />
      <h2 class="fluid text-center leading-tight font-black">
        <span>Your </span>
        <span> journey </span>
        <span> to </span>
        <span> Happiness, </span>
        <span> begins </span>
        <span>Here!</span>
      </h2>
      <p class="text-cpurple-300 mx-auto mt-4 block text-center text-2xl">
        Aprende un idioma o estudia lo que m√°s te gusta, mientras vives la mejor
        experiencia de tu vida.
      </p>
    </section>
    <section></section>
  </div>
</div>

<style>
  @layer animation {
    :root {
      timeline-scope: --outro;
    }

    @keyframes shrink {
      to {
        scale: 1;
      }
    }

    @property --active {
      inherits: true;
      initial-value: 0;
      syntax: "<number>";
    }

    .outro section:last-of-type {
      view-timeline: --outro;
    }

    .content-fluid h2 span,
    .content-fluid p,
    .content-fluid svg {
      opacity: calc(0.25 + (var(--active) / 100));
      animation: activate both
        linear(
          0 0%,
          0.6832 7.89%,
          0.9171 11.07%,
          1.0251 12.99%,
          1.1058 14.9%,
          1.1619 16.86%,
          1.1945 18.91%,
          1.2024 20.02%,
          1.2043 21.18%,
          1.1907 23.72%,
          1.1598 26.27%,
          1.0604 32.59%,
          1.0172 35.84%,
          0.9839 39.49%,
          0.967 43.26%,
          0.9639 45.77%,
          0.9661 48.59%,
          0.9963 60.54%,
          1.0054 67.42%,
          1 100%
        );
      animation-timeline: --outro;
    }

    @keyframes activate {
      to {
        --active: 100;
      }
    }

    .content-fluid h2 span:first-of-type {
      animation-range: entry 0% entry 16.6%;
    }
    .content-fluid h2 span:nth-child(2) {
      animation-range: entry 16.6% entry 32%;
    }
    .content-fluid h2 span:nth-child(3) {
      animation-range: entry 32% entry 48%;
    }
    .content-fluid h2 span:nth-child(4) {
      animation-range: entry 48% entry 64%;
    }
    .content-fluid h2 span:nth-child(5) {
      animation-range: entry 64% entry 80%;
    }
    .content-fluid h2 span:last-of-type {
      animation-range: entry 80% entry 100%;
    }

    .content-fluid p {
      animation-range: entry 88% entry 90.55%;
    }

    @keyframes reveal {
      to {
        opacity: var(--light, 1);
      }
    }

    @keyframes lift {
      to {
        translate: 0 var(--to, 0);
      }
    }
  }

  @layer demo {
    h2 {
      --font-level: 5;
      font-weight: 500;
      margin: 0;
    }

    .content-fluid {
      min-height: 100vh;
      display: grid;
      place-items: center;
      align-content: center;
      position: sticky;
      top: 0;
    }

    .outro section:last-of-type {
      height: 160vh;
    }

    .content-fluid h2 span {
      --font-level: 6;
      filter: drop-shadow(
          0 0 calc((var(--active) / 100) * 5px) hsl(0 0% 100% / 0.6)
        )
        drop-shadow(0 0 calc((var(--active) / 100) * 10px) hsl(0 0% 100% / 0.4))
        drop-shadow(
          0 calc((var(--active) / 100) * 6px) calc((var(--active) / 100) * 15px)
            hsl(0 0% 100% / 0.3)
        )
        drop-shadow(
          0 calc((var(--active) / 100) * 8px) calc((var(--active) / 100) * 20px)
            hsl(0 0% 100% / 0.2)
        )
        drop-shadow(
          0 calc((var(--active) / 100) * 10px)
            calc((var(--active) / 100) * 30px) hsl(0 0% 100% / 0.1)
        );
    }
  }

  @layer base {
    :root {
      --font-size-min: 16;
      --font-size-max: 20;
      --font-ratio-min: 1.2;
      --font-ratio-max: 1.33;
      --font-width-min: 375;
      --font-width-max: 1500;
    }

    :where(.fluid) {
      --fluid-min: calc(
        var(--font-size-min) * pow(var(--font-ratio-min), var(--font-level, 0))
      );
      --fluid-max: calc(
        var(--font-size-max) * pow(var(--font-ratio-max), var(--font-level, 0))
      );
      --fluid-preferred: calc(
        (var(--fluid-max) - var(--fluid-min)) /
          (var(--font-width-max) - var(--font-width-min))
      );
      --fluid-type: clamp(
        (var(--fluid-min) / 16) * 1rem,
        ((var(--fluid-min) / 16) * 1rem) -
          (((var(--fluid-preferred) * var(--font-width-min)) / 16) * 1rem) +
          (var(--fluid-preferred) * var(--variable-unit, 100vi)),
        (var(--fluid-max) / 16) * 1rem
      );
      font-size: var(--fluid-type);
    }
  }
</style>
